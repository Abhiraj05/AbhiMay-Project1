{% extends "base.html" %} {% block start %}
<!-- ðŸ”„ Loading Spinner -->
<div
  id="loader"
  class="fixed inset-0 flex items-center justify-center bg-white z-[9999] hidden"
>
  <div class="flex flex-col items-center space-y-3">
    <div
      class="w-14 h-14 border-4 border-red-500 border-t-transparent rounded-full animate-spin"
    ></div>
    <p class="text-gray-600 font-medium">Loading...</p>
  </div>
</div>
<div>
  <style>
    body {
      font-family: "Inter", sans-serif;
      background-color: #f9fafb;
    }
  </style>

  <!-- Header -->
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
    <div class="container mx-auto px-6 py-4">
      <nav class="flex items-center justify-between">
        <!-- Logo -->
        <a href="/" class="flex items-center space-x-2">
          <svg
            class="h-8 w-8 text-red-500"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
            />
          </svg>
          <h1 class="text-2xl font-bold text-gray-800">Rakthdaan</h1>
        </a>

        <!-- Desktop Navigation Links -->
        <div class="hidden md:flex items-center space-x-2">
          <a
            href="/"
            class="text-gray-600 font-semibold hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors"
            >Home</a
          >
          <a
            href="/blood_bank"
            class="text-gray-600 font-semibold hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors"
            >Blood Banks</a
          >
          <a
            href="/about"
            class="text-red-500 font-semibold bg-red-100 px-3 py-2 rounded-lg"
            >About</a
          >
          <a
            href="/contact_us"
            class="text-gray-600 font-semibold hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors"
            >Contact Us</a
          >
        </div>

        <!-- CTA Buttons (Dynamic) -->
        <div class="hidden md:flex items-center space-x-4">
          {% if user.is_authenticated %} {% if user.is_staff %}
          <a
            href="/admin-dashboard"
            class="bg-blue-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-blue-600 shadow-md"
            >Admin Dashboard</a
          >
          {% else %}
          <a
            href="/profile"
            class="bg-white text-red-500 font-semibold px-5 py-2 rounded-lg hover:bg-gray-100 shadow-sm border"
            >My Profile</a
          >
          {% endif %}
          <a
            href="/logout"
            class="text-gray-600 font-semibold px-4 py-2 hover:text-red-500"
            >Logout</a
          >
          {% else %}
          <a
            href="/login"
            class="bg-red-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-red-600 transition-transform transform hover:scale-105 shadow-md"
            >Login</a
          >
          {% endif %}
        </div>

        <!-- Mobile Menu Button -->
        <div class="md:hidden">
          <button id="menu-btn" class="focus:outline-none">
            <svg
              id="menu-open-icon"
              class="w-6 h-6 text-gray-800"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
            <svg
              id="menu-close-icon"
              class="w-6 h-6 text-gray-800 hidden"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
      </nav>
    </div>
    <!-- Mobile Menu Panel -->
    <div
      id="mobile-menu"
      class="hidden md:hidden absolute top-full left-0 w-full bg-white z-40 shadow-md"
    >
      <div class="px-6 py-4 space-y-2">
        <a
          href="/blood_request"
          class="block text-gray-600 font-semibold py-2 px-3 rounded-lg hover:bg-gray-100"
          >Request Blood</a
        >
        <a
          href="/blood-banks"
          class="block text-gray-600 font-semibold py-2 px-3 rounded-lg hover:bg-gray-100"
          >Blood Banks</a
        >
        <a
          href="/about"
          class="block text-red-500 font-semibold bg-red-100 py-2 px-3 rounded-lg"
          >About</a
        >
        <a
          href="/contact_us"
          class="block text-gray-600 font-semibold py-2 px-3 rounded-lg hover:bg-gray-100"
          >Contact Us</a
        >
        <div class="border-t border-gray-200 pt-4 mt-2 space-y-2">
          {% if user.is_authenticated %} {% if user.is_staff %}
          <a
            href="/admin-dashboard"
            class="block w-full text-center bg-blue-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-blue-600"
            >Admin Dashboard</a
          >
          {% else %}
          <a
            href="/donor-profile"
            class="block w-full text-center bg-gray-100 text-gray-800 font-semibold px-5 py-2 rounded-lg"
            >My Profile</a
          >
          {% endif %}
          <a
            href="/logout"
            class="block w-full text-center bg-red-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-red-600"
            >Logout</a
          >
          {% else %}
          <a
            href="/login"
            class="block w-full text-center bg-red-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-red-600"
            >Login</a
          >
          {% endif %}
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-6 py-12">
    <div class="text-center mb-16">
      <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800">
        Our Mission
      </h1>
      <p class="mt-4 text-xl text-gray-500 max-w-3xl mx-auto">
        To bridge the gap between blood donors and recipients, ensuring no life
        is lost due to a lack of available blood.
      </p>
    </div>

    <div
      class="bg-white rounded-2xl shadow-lg border border-gray-200 p-8 md:p-12 max-w-4xl mx-auto"
    >
      <div class="space-y-8 text-lg text-gray-600 leading-relaxed">
        <p>
          <strong class="text-gray-800"
            >Rakthdaan was born from a simple yet powerful idea:</strong
          >
          in a world of instant connections, finding a blood donor should be
          just as fast and efficient. We witnessed the frantic and often
          stressful process families endure when searching for blood in an
          emergencyâ€”making desperate calls, posting on social media, and facing
          uncertainty at every turn. We knew there had to be a better way.
        </p>
        <p>
          Our platform is that better way. We leverage technology to create a
          secure, private, and incredibly fast network connecting volunteer
          blood donors with those in urgent need. By focusing on a
          notification-based system, we protect the privacy of our heroic donors
          while providing a lifeline to patients' families.
        </p>
        <div class="border-t border-red-200 pt-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">Our Vision</h2>
          <p>
            We envision a future where every urgent request for blood is met
            with a swift, positive response. Our goal is to build a community so
            strong and a system so efficient that no one in our service area has
            to worry about the availability of blood in a crisis. Every donation
            is a gift of life, and we are dedicated to making that gift
            accessible to all.
          </p>
        </div>
      </div>
    </div>

    <!-- CTA Section -->
    {% if not user.is_authenticated %}
    <section class="mt-20">
      <div
        class="container mx-auto text-center bg-red-50 text-gray-800 p-12 rounded-2xl border border-red-200"
      >
        <h2 class="text-3xl md:text-4xl font-bold">Join Us in Our Mission</h2>
        <p class="mt-4 text-lg max-w-2xl mx-auto text-gray-600">
          Whether by donating blood or spreading the word, you can be a part of
          this lifesaving chain.
        </p>
        <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/form"
            class="bg-red-500 text-white font-bold py-3 px-8 rounded-lg text-center hover:bg-red-600 transition-transform transform hover:scale-105 shadow-lg"
          >
            Become a Donor
          </a>
          <a
            href="/blood_request"
            class="bg-white text-gray-700 font-bold py-3 px-8 rounded-lg text-center hover:bg-gray-100 transition-colors border border-gray-300 shadow-lg"
          >
            Request Blood
          </a>
        </div>
      </div>
    </section>
    {% endif %}
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white mt-12">
    <div class="container mx-auto py-10 px-6">
      <div class="grid md:grid-cols-3 gap-8">
        <div>
          <h3 class="font-bold text-xl mb-2">Rakthdaan</h3>
          <p class="text-gray-400">
            Connecting blood donors with recipients to save lives.
          </p>
        </div>
        <div>
          <h3 class="font-bold text-xl mb-2">Quick Links</h3>
          <ul class="text-gray-400 space-y-2">
            <li><a href="/" class="hover:text-white">Home</a></li>
            <li><a href="/about" class="hover:text-white">About Us</a></li>
            {% comment %} <li><a href="#" class="hover:text-white">FAQs</a></li> {% endcomment %}
          </ul>
        </div>
        <div>
          <h3 class="font-bold text-xl mb-2">Contact</h3>
          <ul class="text-gray-400 space-y-2">
            <li>
              <a href="#" class="hover:text-white">contact@rakthadaan.org</a>
            </li>
            <li><a href="#" class="hover:text-white">+91-1234567890</a></li>
          </ul>
        </div>
      </div>
      <div class="mt-8 border-t border-gray-700 pt-6 text-center text-gray-500">
        &copy; 2024 Rakthdaan. All Rights Reserved.
      </div>
    </div>
  </footer>

  <script>
    // --- Mobile Menu Logic ---
    const menuBtn = document.getElementById("menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    const openIcon = document.getElementById("menu-open-icon");
    const closeIcon = document.getElementById("menu-close-icon");

    menuBtn.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
      openIcon.classList.toggle("hidden");
      closeIcon.classList.toggle("hidden");
    });

    document.addEventListener("DOMContentLoaded", function () {
      const loader = document.getElementById("loader");

      function showLoaderAndNavigate(target) {
        loader.classList.remove("hidden");
        loader.style.opacity = "1";

        // Save a flag to detect if we are navigating
        sessionStorage.setItem("navigating", "true");

        setTimeout(() => {
          window.location = target.getAttribute("href");
        }, 1000); // 1 second delay
      }

      const internalLinks = document.querySelectorAll(
  'a[href="/blood_bank"], ' +
  'a[href="/about"], ' +
  'a[href="/contact_us"], ' +
  'a[href="/login"], ' +
  'a[href="/logout"], ' +
  'a[href="/admin-dashboard"], ' +
  'a[href="/profile"], ' +
  'a[href="/form"],'+
  'a[href="/blood_request"]'
);


      internalLinks.forEach((link) => {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          showLoaderAndNavigate(this);
        });
      });
    });

    // Hide loader when page loads
    window.addEventListener("load", function () {
      const loader = document.getElementById("loader");

      // Only hide if it exists
      if (loader) {
        loader.style.opacity = "0";
        loader.style.transition = "opacity 0.5s ease";
        setTimeout(() => loader.classList.add("hidden"), 500);
      }

      // Remove the navigation flag
      sessionStorage.removeItem("navigating");
    });

    // Prevent infinite spinner when coming from back button
    window.addEventListener("pageshow", function (event) {
      const loader = document.getElementById("loader");

      // If this is a back/forward navigation, ensure loader is hidden
      if (event.persisted || sessionStorage.getItem("navigating") !== "true") {
        if (loader) loader.classList.add("hidden");
      }
    });
  </script>
</div>
{% endblock %}
